unit luku;interfaceuses  Windows, Messages, SysUtils, Classes, Graphics, Controls, Forms, Dialogs;type  Tluku = class(TGraphicControl)  private    luku : integer;    lukupituus : integer;    alkuind,loppuind : integer;    korostusvari : TColor;    fontti : TFont;    { Private declarations }    procedure asetaleveysjakorkeus;    procedure muutafontti( Sender : TObject );    procedure SetFont( Value : TFont );    procedure SetNumber( Value : integer );    procedure SetBeginInd( Value : integer );    procedure SetEndInd( Value : integer );    procedure SetSpecialColor( Value : TColor );  protected    procedure Paint;override;  public    constructor Create( AOwner : TComponent ); override;    destructor Destroy; override;  published    property Font : TFont read fontti write SetFont;    property Number : integer read luku write SetNumber;    property BeginInd : integer read alkuind write SetBeginInd;    property EndInd : integer read loppuind write SetEndInd;    property SpecialTextColor : TColor read korostusvari write SetSpecialColor;    property Align;    property DragCursor;    property DragMode;    property Enabled;    property ParentShowHint;    property Visible;    property OnDragDrop;    property OnDragOver;    property OnEndDrag;    property OnMouseDown;    property OnMouseMove;    property OnMouseUp;    property OnStartDrag;  end;procedure Register;implementationprocedure Tluku.asetaleveysjakorkeus;begin  width  := Canvas.TextWidth(IntToStr(luku));  height := Canvas.TextHeight(IntToStr(luku));end;procedure Tluku.muutafontti( Sender : TObject );begin  Canvas.Font.Assign(fontti);  asetaleveysjakorkeus;  InValidate;end;constructor Tluku.Create( AOwner : TComponent );begin  inherited Create( AOwner );  fontti := TFont.Create;  fontti.OnChange := muutafontti;  luku := 1;  lukupituus := 1;  alkuind := 1;loppuind := 1;  korostusvari := clRed;end;destructor Tluku.Destroy;begin  inherited;  fontti.free;end;procedure Tluku.Paint;var lukumj,osamj : string;    alkupituuspix : integer;begin  asetaleveysjakorkeus;  lukumj := IntToStr(luku);  Canvas.Brush.Style := bsclear;  Canvas.Font.Assign(fontti);  osamj := Copy(lukumj,1,alkuind-1);  Canvas.TextOut(0,0,osamj);  alkupituuspix := Canvas.TextWidth(osamj);  osamj := Copy(lukumj,alkuind,loppuind-alkuind+1);  Canvas.Font.Color := korostusvari;  Canvas.TextOut(alkupituuspix,0,osamj);  alkupituuspix := alkupituuspix+Canvas.TextWidth(osamj);  osamj := Copy(lukumj,loppuind+1,length(lukumj));  Canvas.Font.Color := fontti.Color;  Canvas.TextOut(alkupituuspix,0,osamj);end;procedure Tluku.SetFont( Value : TFont );begin  fontti.Assign( Value );  InValidate;end;procedure Tluku.SetNumber( Value : integer );begin  if (Value>0) then begin    luku := Value;    lukupituus := length(IntToStr(luku));    asetaleveysjakorkeus;    InValidate;  end;end;procedure Tluku.SetBeginInd( Value : integer );begin  if (Value<=loppuind) then begin    alkuind := Value;    InValidate;  end;end;procedure Tluku.SetEndInd( Value : integer );begin  if (Value>=alkuind) and (Value<=length(IntToStr(luku))) then begin    loppuind := Value;    InValidate;  end;end;procedure Tluku.SetSpecialColor( Value : Tcolor );begin  korostusvari := Value;  InValidate;end;procedure Register;begin  RegisterComponents('Opetusohjelma', [Tluku]);end;end.